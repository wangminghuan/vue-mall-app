webpackJsonp([23],{"1qYR":function(t,e,n){(t.exports=n("UTlt")(!1)).push([t.i,'\n@charset "UTF-8";\n/**\r\n * [keyframes 定义css关键帧动画keyframes]\r\n * @param  {[type]} $name [定义动画名字]\r\n * @return {[type]}       [no]\r\n */\n/**\r\n * [animation 定义animation动画]\r\n * @param  {[type]} $value [值]\r\n * @return {[type]}        [description]\r\n *\r\n *  example: @include animation(name .5s linear);\r\n */\n.my-new-address-wrap {\n  padding-top: 0.42667rem;\n  height: 100%;\n  background-attachment: #f8f8f8;\n}\n.my-new-address-wrap .address-box {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n                -ms-flex-pack: justify;\n            justify-content: space-between;\n    font-size: 15px;\n    padding: 0 0.32rem;\n    line-height: 1.2rem;\n    height: 1.2rem;\n    background: #fff;\n    border-bottom: 1px solid #f8f8f8;\n    position: relative;\n    -webkit-box-align: center;\n                -ms-flex-align: center;\n            align-items: center;\n}\n.my-new-address-wrap .address-box.item .right {\n      -webkit-box-flex: 1;\n                  -ms-flex: 1;\n              flex: 1;\n      text-align: right;\n      color: #000;\n      height: 100%;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n}\n.my-new-address-wrap .address-box.item .right input {\n        text-align: right;\n        height: 30px;\n        line-height: 30px;\n}\n.my-new-address-wrap .address-box.item .right input,\n      .my-new-address-wrap .address-box.item .right textarea {\n        width: 5.33333rem;\n}\n.my-new-address-wrap .address-box .my-switch {\n      position: relative;\n      z-index: 10;\n      display: block;\n      width: 42px;\n      height: 22px;\n      left: 0;\n      border: 1px solid #dfdfdf;\n      border-radius: 16px;\n      background-color: #dfdfdf;\n      -webkit-appearance: none;\n      color: #dd2727;\n}\n.my-new-address-wrap .address-box .my-switch::after {\n        content: "";\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 20px;\n        border-radius: 10px;\n        -webkit-transition: -webkit-transform 0.3s;\n        transition: -webkit-transform 0.3s;\n        transition: transform 0.3s;\n        transition: transform 0.3s, -webkit-transform 0.3s;\n}\n.my-new-address-wrap .address-box .my-switch::after {\n        -webkit-transform: translateX(0px);\n                transform: translateX(0px);\n        width: 20px;\n        background-color: #fff;\n        -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);\n                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);\n}\n.my-new-address-wrap .address-box .my-switch.checked {\n        background-color: #dd2727;\n}\n.my-new-address-wrap .address-box .my-switch.checked::after {\n          -webkit-transform: translateX(20px);\n                  transform: translateX(20px);\n}\n.my-new-address-wrap .save {\n    position: fixed;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    background: #dd2727;\n    color: #fff;\n    font-size: 17px;\n    text-align: center;\n    line-height: 1.33333rem;\n}\n',""])},VuDx:function(t,e,n){var i=n("1qYR");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("FIqI")("000027a4",i,!0,{})},"g/fy":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("mvHQ"),r=n.n(a),o=n("oAV5"),l={data:function(){return{items:[],show:this.value,navIndex:1,nav:{txt1:this.chooseTitle,txt2:"",txt3:""},columnsObj:{},active:{},activeClasses:"",itemHeight:40,columnNum:1}},props:{ready:{type:Boolean,default:!0},provance:String,city:String,area:String,callback:Function,title:{type:String,default:"所在地区"},chooseTitle:{type:String,default:"请选择"},value:{type:Boolean,default:!1},columns:{validator:function(t){return/^\d*$/.test(t)}},maskerOpacity:{validator:function(t){return/^([0]|[1-9]\d*)?(\.\d*)?$/.test(t)},default:.5}},watch:{value:function(t){var e=this;o.g&&(t?Object(o.a)(this.scrollView,"g-fix-ios-overflow-scrolling-bug"):setTimeout(function(){Object(o.i)(e.scrollView,"g-fix-ios-overflow-scrolling-bug")},200),this.$refs.mask.$el&&(t?o.h.lock(this.$refs.mask.$el):o.h.unlock(this.$refs.mask.$el))),this.show=t},ready:function(t){t&&this.init()}},computed:{styles:function(){var t={"z-index":"1500","background-color":"#000"};return this.show&&(t.opacity="0.5",t["pointer-events"]="auto"),t}},methods:{init:function(){var t=this;this.ready&&this.items&&this.items[0]&&this.isArray(this.items)&&(this.columns&&~~this.columns>1?this.columnNum=~~this.columns:this.getColumsNum(this.items[0]),this.columnsObj.columnItems1=this.items,this.provance&&this.$nextTick(function(){t.setDefalutValue(t.items,"provance",1)}),this.$on("ydui.cityselect.reset",function(){for(var e=1;e<=t.columnNum;e++)t.active["itemValue"+e]="",t.active["itemName"+e]="",e-1==0?(t.navIndex=e,t.nav["txt"+e]=t.chooseTitle,t.$refs["itemBox"+e][0].scrollTop=0,t.backoffView(!1)):(t.nav["txt"+e]="",t.columnsObj["columnItems"+e]=[]),e===t.columnNum&&t.returnValue()}))},navEvent:function(t){this.columnNum>2&&(t>=this.columnNum?this.forwardView(!0):this.backoffView(!0)),this.navIndex=t},itemEvent:function(t,e,n,i){if(this.active["itemValue"+t]=n,this.active["itemName"+t]=e,this.nav["txt"+t]=e,this.columnsObj["columnItems"+(t+1)]=i,t>1&&i&&i.length>0&&this.columnNum>2&&this.forwardView(!0),this.clearNavTxt(t),i||(i=[]),t===this.columnNum||i.length<=0){if(t!==this.columnNum)for(var s=this.columnNum;s>=0;s--)s>t&&(this.active["itemValue"+s]="",this.active["itemName"+s]="",this.nav["txt"+s]="");this.navIndex=t,this.returnValue()}else this.navIndex=t+1,this.nav["txt"+(t+1)]=this.chooseTitle},currentClass:function(t,e,n){return t&&t==this.active["itemValue"+n]||e&&e===this.active["itemName"+n]?"yd-cityselect-item-active":""},clearNavTxt:function(t){for(var e=0;e<this.columnNum;e++)e>t&&(this.nav["txt"+(e+1)]="")},getColumsNum:function(t){this.isArray(t.children)&&(this.columnNum++,this.getColumsNum(t.children[0]))},isArray:function(t){return t&&t.constructor===Array&&t.length>0},setDefalutValue:function(t,e,n){var i=this;t.every(function(t,s){if(t.re_id==i[e]||t.re_name===i[e]){var a=i.columnsObj["columnItems"+(n+1)]=t.children,r=i.$refs["itemBox"+n][0];return r.scrollTop=s*i.itemHeight-r.offsetHeight/3,i.active["itemValue"+n]=t.re_id,i.active["itemName"+n]=t.re_name,i.nav["txt"+n]=t.re_name,i.navIndex=n,++n>=i.columnNum&&i.columnNum>2&&i.forwardView(!1),i.isArray(a)&&i.setDefalutValue(a,["","provance","city","area"][n],n),!1}return!0})},returnValue:function(){this.callback&&this.callback(this.active),this.close()},close:function(){this.$emit("input",!1),this.show=!1},backoffView:function(t){this.activeClasses=(t?"yd-cityselect-move-animate":"")+" yd-cityselect-prev"},forwardView:function(t){this.activeClasses=(t?"yd-cityselect-move-animate":"")+" yd-cityselect-next"}},mounted:function(){this.init(),this.scrollView=Object(o.e)(this.$el)},beforeDestroy:function(){this.close(),o.g&&Object(o.i)(this.scrollView,"g-fix-ios-overflow-scrolling-bug")},created:function(){var t=this;this.$axios.post("/wap/Region/all",{tree:1}).then(function(e){var n=e.data;0==n.code&&(localStorage.setItem("__city_data__",r()(n.data)),t.items=n.data,t.init())})}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"mask",staticClass:"yd-mask",style:t.styles}),t._v(" "),n("div",{staticClass:"yd-cityselect",class:t.show?"yd-cityselect-active":""},[n("div",{staticClass:"yd-cityselect-header"},[n("p",{staticClass:"yd-cityselect-title"},[t._v(t._s(t.title)),n("i",{staticClass:"close-icon",on:{click:function(e){return e.stopPropagation(),t.close(e)}}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.ready,expression:"ready"}],staticClass:"yd-cityselect-nav"},t._l(t.columnNum,function(e,i){return n("a",{directives:[{name:"show",rawName:"v-show",value:!!t.nav["txt"+e],expression:"!!nav['txt' + index]"}],key:i,class:e==t.navIndex?"yd-cityselect-nav-active":"",attrs:{href:"javascript:;"},on:{click:function(n){n.stopPropagation(),t.navEvent(e)}}},[t._v(t._s(t.nav["txt"+e]))])}),0)]),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.ready,expression:"ready"}],staticClass:"yd-cityselect-content",class:t.activeClasses},t._l(t.columnNum,function(e,i){return n("li",{key:i,ref:"itemBox"+e,refInFor:!0,staticClass:"yd-cityselect-item"},[t.columnsObj["columnItems"+e]&&t.columnsObj["columnItems"+e].length>0?[n("div",{staticClass:"yd-cityselect-item-box"},t._l(t.columnsObj["columnItems"+e],function(i,s){return n("a",{key:s,class:t.currentClass(i.re_id,i.re_name,e),attrs:{href:"javascript:;"},on:{click:function(n){n.stopPropagation(),t.itemEvent(e,i.re_name,i.re_id,i.children)}}},[n("span",[t._v(t._s(i.re_name))])])}),0)]:[n("div",{staticClass:"yd-cityselect-item-box",on:{touchstart:function(t){t.stopPropagation(),t.preventDefault()}}})]],2)}),0)])])},staticRenderFns:[]};var d={components:{citySelect:n("C7Lr")(l,c,!1,function(t){n("pmXw")},null,null).exports},data:function(){return{showCity:!1,renderCity:!1,id:this.$route.query.id,isEdit:!!this.$route.query.id,isDefault:!1,holder:"请输入联系方式",renderData:{area_name:"",city_name:"",province_name:"",name:"",phone:"",address:""},cityCode:{}}},computed:{cityName:function(){return this.renderData.province_name+this.renderData.city_name+this.renderData.area_name}},methods:{handleInput:function(t){this.renderData.phone=t.target.value.replace(/\D+/g,"")},selectCityCallback:function(t){this.renderData.province_name=t.itemName1||"",this.renderData.city_name=t.itemName2||"",this.renderData.area_name=t.itemName3||"",this.cityCode={province:t.itemValue1||"",city:t.itemValue2||"",area:t.itemValue3||""}},getAddressDetail:function(){var t=this;this.$axios.post("/wap/Address/get",{a_id:this.id}).then(function(e){var n=e.data;0==n.code&&(t.renderData=n.data||{},t.isDefault=1==t.renderData.is_default,t.cityCode={province:t.renderData.province||"",city:t.renderData.city||"",area:t.renderData.area||""},t.renderCity=!0),t.$store.commit("setLoading",!1)})},checkPhoneNumber:function(){return!!/^1[3456789]\d{9}$/.test(this.renderData.phone)||(this.$toast.error("请输入正确的联系方式！"),!1)},saveAddress:function(){var t=this,e=this.renderData.name.replace(/\s+/,""),n=this.renderData.address.replace(/\s+/,"");if(e){if(this.checkPhoneNumber())if(this.cityCode.province&&this.cityCode.city)if(n){this.$store.commit("setLoading",!0);var i=s()({name:e,phone:this.renderData.phone,address:n,is_default:this.isDefault?1:0},this.cityCode);this.isEdit&&(i.a_id=this.renderData.a_id),this.$axios.post(this.isEdit?"/wap/Address/update":"/wap/Address/add",i).then(function(e){0==e.data.code&&(t.$toast.success(t.isEdit?"修改成功":"添加成功"),setTimeout(function(){window.history.go(-1)},1e3)),t.$store.commit("setLoading",!1)})}else this.$toast.error("请填写详细地址");else this.$toast.error("请选择所在地区")}else this.$toast.error("请填写收货人姓名")}},created:function(){this.isEdit?this.getAddressDetail():(this.$store.commit("setLoading",!1),this.renderCity=!0)}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-new-address-wrap"},[n("ul",[n("li",{staticClass:"address-box item"},[n("div",{staticClass:"left"},[t._v("收货人")]),t._v(" "),n("div",{staticClass:"right"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.renderData.name,expression:"renderData.name"}],attrs:{type:"text",placeholder:"请输入姓名"},domProps:{value:t.renderData.name},on:{input:function(e){e.target.composing||t.$set(t.renderData,"name",e.target.value)}}})])]),t._v(" "),n("li",{staticClass:"address-box item"},[n("div",{staticClass:"left"},[t._v("联系方式")]),t._v(" "),n("div",{staticClass:"right"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.renderData.phone,expression:"renderData.phone"}],attrs:{type:"tel",placeholder:t.holder},domProps:{value:t.renderData.phone},on:{focus:function(e){t.holder=""},blur:function(e){t.holder="请输入联系方式"},input:[function(e){e.target.composing||t.$set(t.renderData,"phone",e.target.value)},t.handleInput]}})])]),t._v(" "),n("li",{staticClass:"address-box item"},[n("div",{staticClass:"left"},[t._v("所在地区")]),t._v(" "),n("div",{staticClass:"right",on:{click:function(e){t.showCity=!0}}},[t.cityName?n("span",[t._v(t._s(t.cityName))]):n("span",{staticStyle:{color:"#555"}},[t._v("请选择所在地区")])])]),t._v(" "),n("li",{staticClass:"address-box item"},[n("div",{staticClass:"left"},[t._v("详细地址")]),t._v(" "),n("div",{staticClass:"right"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.renderData.address,expression:"renderData.address"}],attrs:{type:"text",placeholder:"请输入详细地址"},domProps:{value:t.renderData.address},on:{input:function(e){e.target.composing||t.$set(t.renderData,"address",e.target.value)}}})])]),t._v(" "),n("li",{staticClass:"address-box"},[n("div",{staticClass:"left"},[t._v("设为默认地址")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.isDefault,expression:"isDefault"}],class:["my-switch",t.isDefault?"checked":""],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isDefault)?t._i(t.isDefault,null)>-1:t.isDefault},on:{change:function(e){var n=t.isDefault,i=e.target,s=!!i.checked;if(Array.isArray(n)){var a=t._i(n,null);i.checked?a<0&&(t.isDefault=n.concat([null])):a>-1&&(t.isDefault=n.slice(0,a).concat(n.slice(a+1)))}else t.isDefault=s}}})])]),t._v(" "),n("div",{staticClass:"save",on:{click:function(e){t.saveAddress()}}},[t._v("保存并使用")]),t._v(" "),t.renderCity?n("citySelect",{ref:"cityselectDemo",attrs:{callback:t.selectCityCallback,provance:t.renderData.province_name,city:t.renderData.city_name,area:t.renderData.area_name},model:{value:t.showCity,callback:function(e){t.showCity=e},expression:"showCity"}}):t._e()],1)},staticRenderFns:[]};var h=n("C7Lr")(d,m,!1,function(t){n("VuDx")},null,null);e.default=h.exports},pmXw:function(t,e,n){var i=n("x08b");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("FIqI")("7e0f5a06",i,!0,{})},x08b:function(t,e,n){(t.exports=n("UTlt")(!1)).push([t.i,"\n.yd-mask {\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  top: 0;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n              -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n              -ms-flex-align: center;\n          align-items: center;\n  pointer-events: none;\n  -webkit-transition: opacity .2s ease-in;\n  transition: opacity .2s ease-in;\n  opacity: 0;\n}\n.yd-scrollview {\n  width: 100%;\n  height: 100%;\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n      flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n  position: relative;\n  margin-bottom: -1px;\n}\n.yd-cityselect {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 75%;\n  background-color: #fff;\n  z-index: 1502;\n  -webkit-transform: translate(0, 100%);\n          transform: translate(0, 100%);\n  -webkit-transition: -webkit-transform .2s;\n  transition: -webkit-transform .2s;\n  transition: transform .2s;\n  transition: transform .2s, -webkit-transform .2s;\n}\n.yd-cityselect-active {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n}\n.yd-cityselect-move-animate {\n    -webkit-transition: -webkit-transform .3s;\n    transition: -webkit-transform .3s;\n    transition: transform .3s;\n    transition: transform .3s, -webkit-transform .3s;\n}\n.yd-cityselect-next {\n    -webkit-transform: translate(-50%, 0);\n            transform: translate(-50%, 0);\n}\n.yd-cityselect-prev {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n}\n.yd-cityselect-header {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n}\n.yd-cityselect-header:after {\n    content: '';\n    position: absolute;\n    z-index: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    border-bottom: 1px solid #bdbdbd;\n    -webkit-transform: scaleY(0.5);\n    transform: scaleY(0.5);\n    -webkit-transform-origin: 0 0;\n    transform-origin: 0 0;\n}\n.yd-cityselect-title {\n  width: 100%;\n  font-size: 14px;\n  text-align: center;\n  height: 45px;\n  line-height: 45px;\n  position: relative;\n}\n.yd-cityselect-title:after {\n    content: '';\n    position: absolute;\n    z-index: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    border-bottom: 1px solid #B2B2B2;\n    -webkit-transform: scaleY(0.5);\n    transform: scaleY(0.5);\n    -webkit-transform-origin: 0 0;\n    transform-origin: 0 0;\n}\n.yd-cityselect-title .close-icon {\n    position: absolute;\n    top: 50%;\n    right: 10px;\n    -webkit-transform: translateY(-50%);\n            transform: translateY(-50%);\n}\n.yd-cityselect-nav {\n  width: 100%;\n  padding-left: 10px;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.yd-cityselect-nav > a {\n    font-size: 13px;\n    color: #222;\n    display: block;\n    height: 40px;\n    line-height: 46px;\n    padding: 0 8px;\n    position: relative;\n    margin-right: 15px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-width: 40%;\n}\n.yd-cityselect-nav-active {\n    color: #F23030 !important;\n}\n.yd-cityselect-nav-active:after {\n      content: '';\n      width: 100%;\n      height: 2px;\n      background-color: #F23030;\n      position: absolute;\n      bottom: 1px;\n      left: 0;\n      z-index: 2;\n}\n.yd-cityselect-content {\n  height: 100%;\n  padding-top: 85px;\n  width: 100%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.yd-cityselect-item {\n  display: block;\n  height: inherit;\n  width: 50%;\n  /* for old android */\n  -webkit-box-flex: 0;\n              -ms-flex: 0 0 50%;\n          flex: 0 0 50%;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  background-color: #FFF;\n}\n.yd-cityselect-item::-webkit-scrollbar {\n    width: 0;\n}\n.yd-cityselect-item:nth-child(2n) {\n    background-color: #F5F5F5;\n}\n.yd-cityselect-item-active {\n    color: #F23030 !important;\n}\n.yd-cityselect-item-active:after {\n      display: block;\n      content: '\\E600';\n      font-family: 'YDUI-INLAY';\n}\n.yd-cityselect-item-box {\n  width: 100%;\n  height: inherit;\n  display: block;\n  padding: 0 20px;\n}\n.yd-cityselect-item-box > a {\n    color: #333;\n    font-size: 13px;\n    height: 40px;\n    line-height: 40px;\n    overflow: hidden;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n                -ms-flex-align: center;\n            align-items: center;\n    width: 100%;\n    position: relative;\n    z-index: 1;\n}\n.yd-cityselect-item-box > a:before {\n      content: '';\n      position: absolute;\n      z-index: 0;\n      bottom: 0;\n      left: 0;\n      width: 100%;\n      border-bottom: 1px solid #D9D9D9;\n      -webkit-transform: scaleY(0.5);\n      transform: scaleY(0.5);\n      -webkit-transform-origin: 0 0;\n      transform-origin: 0 0;\n}\n.yd-cityselect-item-box > a:active {\n      background: none;\n}\n.yd-cityselect-item-box > a span {\n      -webkit-box-flex: 1;\n                  -ms-flex: 1;\n              flex: 1;\n      display: block;\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n      word-break: break-all;\n      text-overflow: ellipsis;\n      line-height: 20px;\n      max-height: 20px;\n      font-size: 12px;\n}\n.yd-cityselect-loading {\n  width: 100%;\n  height: 100%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n              -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n              -ms-flex-pack: center;\n          justify-content: center;\n  font-size: .26rem;\n  color: #999;\n}\n",""])}});